<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Talking Toaster</title><link href="http://talking.toaster.cz/" rel="alternate"></link><link href="http://talking.toaster.cz/feeds/all.atom.xml" rel="self"></link><id>http://talking.toaster.cz/</id><updated>2015-02-24T00:00:00+01:00</updated><entry><title>Python na Windows bez Pythonu?</title><link href="http://talking.toaster.cz/2015/pyinstaller-python-apps-on-windows-without-python.html" rel="alternate"></link><updated>2015-02-24T00:00:00+01:00</updated><author><name>Věroš Kaplan</name></author><id>tag:talking.toaster.cz,2015-02-24:2015/pyinstaller-python-apps-on-windows-without-python.html</id><summary type="html">&lt;p&gt;Pro neziskovku (&lt;a href="http://www.matata.cz/"&gt;mateřské centrum&lt;/a&gt;) - jsem vyráběl malý program v Pythonu 
v PySide GUI. Jenže neziskovka má počítače na Windows a můj vývojářský stroj 
je na Linuxu. A nutit maminky instalovat do náhodného počítače Python 
pro Windows včetně knihovně je ... &lt;em&gt;moc práce&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Naštěstí existuje workaround v podobě &lt;a href="https://github.com/pyinstaller/pyinstaller/wiki"&gt;PyInstaller&lt;/a&gt;. Do vývojářského
počítače s Windows se nainstaluje Python, všechny potřebné balíčky a 
&lt;code&gt;pyinstaller&lt;/code&gt; z Pythonového programu udělá spustitelný .EXE soubor. 
Ten .EXE soubor je pak možné (většinou) spouštět i na jiném počítači, kde Python není.&lt;/p&gt;
&lt;p&gt;Ve skutečnosti je v tom EXE souboru zabalený celý Python včetně závislostí, 
při každém spuštění se to rozbalí do &lt;code&gt;%TEMPDIR%&lt;/code&gt; a po skončení běhu se to zase maže. 
Ale to jsou pro uživatele nepodstatné detaily. 
&lt;em&gt;Uživatel dostane jeden .EXE soubor, který prostě spustí.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Návod na použití&lt;/strong&gt; je na webu &lt;a href="https://github.com/pyinstaller/pyinstaller/wiki"&gt;pyinstalleru&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Odzkoušeno na Windows 7, Python 2.7, PyInstaller 2.1.&lt;/p&gt;
&lt;p&gt;V případě potřeby je možné celý proces postavení automatizovat 
pomocí Jenkinsu či jiného nástroje.&lt;/p&gt;</summary><category term="python"></category><category term="pyside"></category><category term="windows"></category><category term="pyinstaller"></category></entry><entry><title>Instalace HP Data Protector DA na CentOS</title><link href="http://talking.toaster.cz/2015/hp-data-protector-centos.html" rel="alternate"></link><updated>2015-02-20T00:00:00+01:00</updated><author><name>Věroš Kaplan</name></author><id>tag:talking.toaster.cz,2015-02-20:2015/hp-data-protector-centos.html</id><summary type="html">&lt;p&gt;Kdysi dávno jsem dokázal nainstalovat Disk Agent od HP Omniback na Linux, čímž jsem si 
v jedné továrně získal nehynoucí obdiv místních IT techniků. Čas od času
za tento hřích mládí musím zaplatit, protože mi volají lidé, že chtějí 
CentOS zálohovat pomocí HP Data Protector a chtějí tam nainstalovat jeho Disk Agent.&lt;/p&gt;
&lt;p&gt;Jak na to?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Sehnat médium HP Data protectoru. &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Data protector běží jako služba v inetd (a dokonce umí i xinetd). 
  &lt;em&gt;Před&lt;/em&gt; instalací je  třeba nainstalovat inetd nebo xinetd.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;yum install xinetd -y
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Data Protector chce mít pocit, že na portu 5555 nic neběží a ověřuje si to 
   velmi humorným způsobem. Z &lt;code&gt;/etc/services&lt;/code&gt; smažeme řádek obsahující 5555&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sed -i~ /5555/d  /etc/services
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Nainstalovat RPM balíčky Data Protectoru. Pokud to při instalaci nenapíše, tak je to 
    možná v pořádku. Pokud to napíše něco ošklivého, tak to v pořádku není.   &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rpm -ihv OB2-CORE-A.06.11-1.x86_64.rpm
rpm -ihv OB2-DA-A.06.11-1.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;Přidat podpora moderních&lt;/em&gt; (nebo obskurních) &lt;em&gt;filesystémů&lt;/em&gt;. Pokud je HP DP DA velmi starý (~2011),
    tak nepodporuje například ext4. Pro jeho podporu je potřeba buď z HP sehnat patch
    (a tedy mít produkt pod supportem), nebo ohackovat klienta.&lt;/p&gt;
&lt;p&gt;Editovat skript /opt/omni/lbin/.util , najít řádek 351 a do řádku přidat &lt;strong&gt;-t ext4&lt;/strong&gt; 
nejlépe hned za &lt;strong&gt;-t ext3&lt;/strong&gt; .&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;gpl/i386/linux&lt;span class="o"&gt;)&lt;/span&gt;
     /bin/df -P -t psfs -t ext2 -t SFS -t ext -t minix -t xiafs -t vmfs -t reiserfs -t ext3 -t ext4 -t vfat -t vxfs -t xfs -t hsmfs -t gfs -t lustre_lite -t ocfs -t ocfs2 2&amp;gt;/dev/null &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;1d&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $6}&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;DISCLAIMER:&lt;/strong&gt; Tohle jsou poznámky jak jsem něco udělal, abych na to nezapomněl.&lt;/p&gt;
&lt;p&gt;Novým zákazníkům bych doporučil &lt;a href="http://www.bareos.org/"&gt;Bareos&lt;/a&gt; (který nasazuju). Pokud ale někdo má legacy
system od HP za dlouhé peníze, nedá se nic dělat...&lt;/p&gt;</summary><category term="hp-data-protector"></category></entry><entry><title>Migrate Redmine internal users to LDAP</title><link href="http://talking.toaster.cz/2015/migrate-redmine-internal-users-to-ldap.html" rel="alternate"></link><updated>2015-02-04T00:00:00+01:00</updated><author><name>Věroš Kaplan</name></author><id>tag:talking.toaster.cz,2015-02-04:2015/migrate-redmine-internal-users-to-ldap.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.redmine.org/"&gt;Redmine&lt;/a&gt; can authenticate it's users to multiple backends. &lt;/p&gt;
&lt;p&gt;What if you need to change you internal users to LDAP ones?  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create new &lt;em&gt;LDAP backend&lt;/em&gt; in Administration ( It's in http://my.redmine.org/auth_sources )&lt;ul&gt;
&lt;li&gt;Add new `Auth source&lt;em&gt; and &lt;/em&gt;Test* it. It should return no users, it's OK.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Change one or two users to authenticate to new LDAP auth source. (I'ts in https://my.redmine.org/users/1/edit ) &lt;/li&gt;
&lt;li&gt;Check that these users can login&lt;/li&gt;
&lt;li&gt;Change all other users. &lt;ul&gt;
&lt;li&gt;You can eventually use &lt;code&gt;UPDATE users SET auth_source_id = NEW_ID WHERE auth_source_id = OLD_ID&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Enjoy.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;How to make backups of auth setup&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;mysqldump  redmine_database users --replace --extended-insert=FALSE --no-create-info &amp;gt; redmine_users.sql&lt;/code&gt;
```&lt;/p&gt;</summary><category term="redmine"></category><category term="ldap"></category></entry><entry><title>Owncloud 7 - customize mail messages</title><link href="http://talking.toaster.cz/2015/owncloud-share-by-mail.html" rel="alternate"></link><updated>2015-01-18T22:00:00+01:00</updated><author><name>Věroš Kaplan</name></author><id>tag:talking.toaster.cz,2015-01-17:2015/owncloud-share-by-mail.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.owncloud.com/"&gt;OwnCloud 7&lt;/a&gt; came packed with lots of new features. Many happy users of
OwnCloud uses it as file transfer solution (me including).&lt;/p&gt;
&lt;p&gt;The default mail message sent to the user receiving the file is a bit unformal
and is considered unpolite. It starts &lt;em&gt;Hey there&lt;/em&gt;. How to change the message? &lt;/p&gt;
&lt;p&gt;The good news is file is stored in  &lt;code&gt;core/templates/mail.php&lt;/code&gt; (HTML version) 
and &lt;code&gt;core/templates/altmail.php&lt;/code&gt; (plain text version). 
mc
If you change that templates, the messages can be a bit more polite.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;This is default Czech message, starting with: &lt;em&gt;Hey there!&lt;/em&gt;
&lt;img alt="Default message" src="http://talking.toaster.cz/images/owncloud-default-notification.png" title="Default Czech message" /&gt;&lt;/p&gt;
&lt;p&gt;This is customized message starting with &lt;em&gt;Good afternoon&lt;/em&gt;
&lt;img alt="Custom message" src="http://talking.toaster.cz/images/owncloud-custom-notification.png" title="Customized Czech message" /&gt;&lt;/p&gt;</summary><category term="owncloud"></category></entry><entry><title>Owncloud 7 - upgrade from 6</title><link href="http://talking.toaster.cz/2015/owncloud-7-upgrade-from-6.html" rel="alternate"></link><updated>2015-01-15T22:00:00+01:00</updated><author><name>Věroš Kaplan</name></author><id>tag:talking.toaster.cz,2015-01-15:2015/owncloud-7-upgrade-from-6.html</id><summary type="html">&lt;p&gt;&lt;a href="http://www.owncloud.com/seven/"&gt;OwnCloud 7&lt;/a&gt; is here for more than three months (&lt;a href="https://owncloud.org/releases/Changelog"&gt;changelog&lt;/a&gt;). How to upgrade from
OwnCloud 6?&lt;/p&gt;
&lt;p&gt;The good news: it's easy.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Make backups&lt;/li&gt;
&lt;li&gt;&lt;a href="https://owncloud.org/install/#instructions-server"&gt;Download&lt;/a&gt; .tar.gz package and extract it&lt;/li&gt;
&lt;li&gt;Copy &lt;code&gt;owncloud6/config/config.php&lt;/code&gt; to &lt;code&gt;owncloud7/config/config.pjp&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Run migration tasks by: &lt;code&gt;sudo -u apache php occ upgrade&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</summary><category term="owncloud"></category></entry></feed>